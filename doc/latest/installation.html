<!doctypehtml><html data-content_root=./ lang=en><meta charset=utf-8><meta content=width=device-width,initial-scale=1.0 name=viewport><meta content=width=device-width,initial-scale=1 name=viewport><meta content=width=device-width,initial-scale=1 name=viewport><meta content=ie=edge http-equiv=x-ua-compatible><meta content="Copy to clipboard"name=lang:clipboard.copy><meta content="Copied to clipboard"name=lang:clipboard.copied><meta content=en name=lang:search.language><meta content=True name=lang:search.pipeline.stopwords><meta content=True name=lang:search.pipeline.trimmer><meta content="No matching documents"name=lang:search.result.none><meta content="1 matching document"name=lang:search.result.one><meta content="# matching documents"name=lang:search.result.other><meta content=[\s\-]+ name=lang:search.tokenizer><meta content="LIEF Documentation"name=Description><link crossorigin href=https://fonts.gstatic.com/ rel=preconnect><script src=_static/javascripts/vendor.min.js></script><link href=https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.2.1/css/all.min.css rel=stylesheet><link href=_static/favicon.ico rel=apple-touch-icon><title>Installation and Integration — LIEF Documentation</title><link href=_static/fonts/material-icons.css rel=stylesheet><link href=_static/stylesheets/vendor.min.css rel=stylesheet><link href=_static/pygments.css?v=3d3fbe02 rel=stylesheet><link href=_static/basic.css?v=eeb27264 rel=stylesheet><link href=_static/graphviz.css?v=eafc0fe6 rel=stylesheet><link href=_static/css/custom.css?v=d79dd603 rel=stylesheet><script src=_static/documentation_options.js?v=9ef577a8></script><script src=_static/doctools.js?v=888ff710></script><script src=_static/sphinx_highlight.js?v=dc90522c></script><link href=_static/favicon.ico rel=icon><link href=genindex.html rel=index title=Index><link href=search.html rel=search title=Search><link title="Getting Started"href=getting_started.html rel=next><link href=intro.html rel=prev title=Introduction><link href=_static/stylesheets/theme.css rel=stylesheet><link href=_static/stylesheets/theme-fixes.css rel=stylesheet><body data-md-color-accent=cyan data-md-color-primary=blue dir=ltr><nav class="navbar navbar-expand-lg navbar-light bg-white border-bottom fixed-top"role=navigation><a class=navbar-brand href=index.html>LIEF Documentation</a><button class=navbar-toggler data-target=#navbar-collapse data-toggle=collapse><span class=navbar-toggler-icon></span></button><div class="collapse navbar-collapse justify-content-center mt-2 mt-lg-0"id=navbar-collapse><ul class="navbar-nav position-relative px-lg-6 px-xl-8"><li class=nav-item><a class=nav-link href=https://lief-project.github.io/> <i class="fa-solid fa-house mr-3"></i>Home </a><li class=nav-item><a class=nav-link href=https://lief-project.github.io//blog> <i class="fa-solid fa-rss mr-3"></i>Blog </a><li class=nav-item><a class=nav-link href=https://lief-project.github.io//download> <i class="fa-solid fa-download mr-3"></i>Download </a><li class="nav-item dropdown"><a class="nav-link dropdown-toggle"aria-expanded=false data-toggle=dropdown href=# role=button> <i class="fa-solid fa-book mr-3"></i>Documentation </a> <div class=dropdown-menu role=menu><a class=dropdown-item href=https://lief-project.github.io//doc/latest/doxygen>Doxygen</a></div><li class=nav-item><a class=nav-link href=https://lief-project.github.io//about> <i class="fa-solid fa-bars-staggered mr-3"></i>About </a><li class=nav-item><a class="btn btn-outline-pink"href=https://github.com/sponsors/lief-project/ target=_blank> <i class="fa-solid fa-heart mr-3"></i> Sponsor </a></ul></div></nav><div class="container-fluid container-docs"><div class=row><div class="col-12 col-lg-3 col-xl-2 border-lg-right py-lg-5 pl-lg-4 docs-sidebar docs-sidebar-left"><div class="collapse d-lg-block mb-6 mb-lg-0"id=sidebar-collapse><form action=search.html method=GET name=search><input autocapitalize=off autocomplete=off class=form-control data-md-component=query data-md-state=active name=q placeholder=Search spellcheck=false></form><ul class="list-unstyled mt-3"><li><a class="text-darkblue font-size-sm d-block mb-2"href=intro.html>Introduction</a></ul><ul class="list-unstyled mt-3"><li><a class="text-darkblue font-size-sm d-block mb-2"href=#>Installation and Integration</a></ul><ul class="list-unstyled mt-3"><li><a class="text-darkblue font-size-sm d-block mb-2"href=getting_started.html>Getting Started</a></ul><ul class="list-unstyled mt-3"><li><a class="text-darkblue font-size-sm d-block mb-2"href=compilation.html>Compilation</a></ul><ul class="list-unstyled mt-3"><li><a class="text-darkblue font-size-sm d-block mb-2"href=error_handling.html>Error Handling</a></ul><div class="text-darkblue text-uppercase font-size-normal font-weight-bolder mt-4 pt-2 mb-2"><span class=caption-text><i class="fa-solid fa-layer-group"> </i>Tutorials</span></div><ul class="list-unstyled mt-3"><li><a class="text-darkblue font-size-sm d-block mb-2"href=tutorials/01_play_with_formats.html>01 - Parse and manipulate formats</a></ul><ul class="list-unstyled mt-3"><li><a class="text-darkblue font-size-sm d-block mb-2"href=tutorials/02_pe_from_scratch.html>02 - Create a PE from scratch</a></ul><ul class="list-unstyled mt-3"><li><a class="text-darkblue font-size-sm d-block mb-2"href=tutorials/03_elf_change_symbols.html>03 - Play with ELF symbols</a></ul><ul class="list-unstyled mt-3"><li><a class="text-darkblue font-size-sm d-block mb-2"href=tutorials/04_elf_hooking.html>04 - ELF Hooking</a></ul><ul class="list-unstyled mt-3"><li><a class="text-darkblue font-size-sm d-block mb-2"href=tutorials/05_elf_infect_plt_got.html>05 - Infecting the plt/got</a></ul><ul class="list-unstyled mt-3"><li><a class="text-darkblue font-size-sm d-block mb-2"href=tutorials/06_pe_hooking.html>06 - PE Hooking (Deprecated)</a></ul><ul class="list-unstyled mt-3"><li><a class="text-darkblue font-size-sm d-block mb-2"href=tutorials/07_pe_resource.html>07 - PE Resources</a></ul><ul class="list-unstyled mt-3"><li><a class="text-darkblue font-size-sm d-block mb-2"href=tutorials/08_elf_bin2lib.html>08 - Transforming an ELF executable into a library</a></ul><ul class="list-unstyled mt-3"><li><a class="text-darkblue font-size-sm d-block mb-2"href=tutorials/09_frida_lief.html>09 - How to use frida on a non-rooted device</a></ul><ul class="list-unstyled mt-3"><li><a class="text-darkblue font-size-sm d-block mb-2"href=tutorials/10_android_formats.html>10 - Android formats</a></ul><ul class="list-unstyled mt-3"><li><a class="text-darkblue font-size-sm d-block mb-2"href=tutorials/11_macho_modification.html>11 - Mach-O Modification</a></ul><ul class="list-unstyled mt-3"><li><a class="text-darkblue font-size-sm d-block mb-2"href=tutorials/12_elf_coredump.html>12 - ELF Coredump</a></ul><ul class="list-unstyled mt-3"><li><a class="text-darkblue font-size-sm d-block mb-2"href=tutorials/13_pe_authenticode.html>13 - PE Authenticode</a></ul><div class="text-darkblue text-uppercase font-size-normal font-weight-bolder mt-4 pt-2 mb-2"><span class=caption-text><i class="fa-solid fa-code"> </i>API</span></div><ul class="list-unstyled mt-3"><li><a class="text-darkblue font-size-sm d-block mb-2"href=api/python/index.html>Python</a></ul><ul class="list-unstyled mt-3"><li><a class="text-darkblue font-size-sm d-block mb-2"href=api/cpp/index.html>C++</a></ul><ul class="list-unstyled mt-3"><li><a class="text-darkblue font-size-sm d-block mb-2"href=api/c/index.html>C</a></ul><div class="text-darkblue text-uppercase font-size-normal font-weight-bolder mt-4 pt-2 mb-2"><span class=caption-text><i class="fa-brands fa-space-awesome"> </i>Extra Information</span></div><ul class="list-unstyled mt-3"><li><a class="text-darkblue font-size-sm d-block mb-2"href=formats/index.html>Formats</a></ul><ul class="list-unstyled mt-3"><li><a class="text-darkblue font-size-sm d-block mb-2"href=references.html>References</a></ul><ul class="list-unstyled mt-3"><li><a class="text-darkblue font-size-sm d-block mb-2"href=changelog.html>Changelog</a></ul></div><hr><span class="svg-icon text-purple mr-1 relative-top--1"> <svg viewbox="0 0 512 512"height=512 width=512 xmlns=http://www.w3.org/2000/svg><title>ionicons-v5-d</title><circle cx=160 cy=96 r=48 style=fill:none;stroke:#000;stroke-linecap:round;stroke-linejoin:round;stroke-width:32px></circle><circle cx=160 cy=416 r=48 style=fill:none;stroke:#000;stroke-linecap:round;stroke-linejoin:round;stroke-width:32px></circle><line style=fill:none;stroke:#000;stroke-linecap:round;stroke-linejoin:round;stroke-width:32px x1=160 x2=160 y1=368 y2=144></line><circle cx=352 cy=160 r=48 style=fill:none;stroke:#000;stroke-linecap:round;stroke-linejoin:round;stroke-width:32px></circle><path d=M352,208c0,128-192,48-192,160 style=fill:none;stroke:#000;stroke-linecap:round;stroke-linejoin:round;stroke-width:32px></path></svg> </span><a class=text-darkblue href=https://github.com/lief-project/LIEF/commits/d30b8707>0.15.0-d30b8707</a><br> Last updated on 02/03/2024, 10:34:50.</div><div class="col-12 col-lg-9 col-xl-8 offset-lg-3 offset-xl-2 py-lg-5 px-lg-6 mb-8"><section id=installation-and-integration><h1 id=installation--page-root>Installation and Integration<a title="Link to this heading"class=headerlink href=#installation--page-root>¶</a></h1><section id=sdk><h2 id=sdk>SDK<a title="Link to this heading"class=headerlink href=#sdk>¶</a></h2><p>For each platform supported by LIEF there is an SDK that contains:<ul class=simple><li><p>Static library<li><p>Headers<li><p>Examples</ul><p>Nightly build can be downloaded on: <a class="reference external"href=https://lief.s3-website.fr-par.scw.cloud/latest/sdk>https://lief.s3-website.fr-par.scw.cloud/latest/sdk</a> while releases are available on Github release page: <a class="reference external"href=https://github.com/lief-project/LIEF/releases>https://github.com/lief-project/LIEF/releases</a>.</section><section id=python><h2 id=python>Python<a title="Link to this heading"class=headerlink href=#python>¶</a></h2><section id=since-0-12-0><span id=v12-label></span><h3 id=since-0-12-0>Since 0.12.0<a title="Link to this heading"class=headerlink href=#since-0-12-0>¶</a></h3><p>Since LIEF v0.12.0 the Python nightly wheels have moved to Scalway S3. They can be installed through:<div class="highlight-console notranslate"><div class=highlight><pre><span></span><span class=gp>$ </span>pip<span class=w> </span>install<span class=w> </span><span class=o>[</span>--user<span class=o>]</span><span class=w> </span>--index-url<span class=w> </span>https://lief.s3-website.fr-par.scw.cloud/latest<span class=w> </span>lief
</pre></div></div></section><section id=since-0-10-0><span id=v10-label></span><h3 id=since-0-10-0>Since 0.10.0<a title="Link to this heading"class=headerlink href=#since-0-10-0>¶</a></h3><p>To install nightly build (master):<div class="highlight-console notranslate"><div class=highlight><pre><span></span><span class=gp>$ </span>pip<span class=w> </span>install<span class=w> </span><span class=o>[</span>--user<span class=o>]</span><span class=w> </span>--index-url<span class=w>  </span>https://lief-project.github.io/packages<span class=w> </span>lief
</pre></div></div><p>You can also directly download the Python wheel package on: <a class="reference external"href=https://lief-project.github.io/packages/lief>https://lief-project.github.io/packages/lief</a><div class="admonition note"><p class=admonition-title>Note<p>If you already installed a nightly version of LIEF you may need the flag: <code class="docutils literal notranslate"><span class=pre>--no-cache-dir</span></code></div><p>To install <strong>release</strong> package<div class="highlight-console notranslate"><div class=highlight><pre><span></span><span class=gp>$ </span>pip<span class=w> </span>install<span class=w> </span>lief
</pre></div></div><p>Release packages can be found on <a class="reference external"href=https://pypi.org/project/lief/>PyPI</a> and the Github release page: <a class="reference external"href=https://github.com/lief-project/LIEF/releases>https://github.com/lief-project/LIEF/releases</a><p>Using <code class="docutils literal notranslate"><span class=pre>setup.py</span></code>, one can build and install lief as follows:<div class="highlight-console notranslate"><div class=highlight><pre><span></span><span class=gp>$ </span>python<span class=w> </span>./setup.py<span class=w> </span><span class=o>[</span>--user<span class=o>]</span><span class=w> </span>install
</pre></div></div><p>LIEF modules can also be parameterized using the following options:<div class="highlight-console notranslate"><div class=highlight><pre><span></span><span class=gp>$ </span>python<span class=w> </span>./setup.py<span class=w> </span>--help
<span class=go>...</span>

<span class=go>--lief-test         Build and make tests</span>
<span class=go>--ninja             Use Ninja as build system</span>
<span class=go>--sdk               Build SDK package</span>
<span class=go>--lief-no-json      Disable JSON module</span>
<span class=go>--lief-no-logging   Disable logging module</span>
<span class=go>--lief-no-elf       Disable ELF module</span>
<span class=go>--lief-no-pe        Disable PE module</span>
<span class=go>--lief-no-macho     Disable Mach-O module</span>
<span class=go>--lief-no-android   Disable Android formats</span>
<span class=go>--lief-no-art       Disable ART module</span>
<span class=go>--lief-no-vdex      Disable VDEX module</span>
<span class=go>--lief-no-oat       Disable OAT module</span>
<span class=go>--lief-no-dex       Disable DEX module</span>
</pre></div></div></section><section id=from-0-8-0-to-0-9-0><h3 id=from-0-8-0-to-0-9-0>From 0.8.0 to 0.9.0<a title="Link to this heading"class=headerlink href=#from-0-8-0-to-0-9-0>¶</a></h3><p>To install <strong>release</strong> package<div class="highlight-console notranslate"><div class=highlight><pre><span></span><span class=gp>$ </span>pip<span class=w> </span>install<span class=w> </span>pylief-VERSION.zip
</pre></div></div><p>Release packages can be found here: <a class="reference external"href=https://github.com/lief-project/LIEF/releases>Releases</a></section><section id=before-0-8-0><h3 id=before-0-8-0>Before 0.8.0<a title="Link to this heading"class=headerlink href=#before-0-8-0>¶</a></h3><p>To install the Python API (example with <code class="docutils literal notranslate"><span class=pre>Python</span> <span class=pre>3.5</span></code>):<div class="highlight-console notranslate"><div class=highlight><pre><span></span><span class=gp>$ </span>pip<span class=w> </span>install<span class=w> </span>lief-XX.YY.ZZ_py35.tar.gz
</pre></div></div></section></section><section id=visual-studio-integration><h2 id=visual-studio-integration>Visual Studio Integration<a title="Link to this heading"class=headerlink href=#visual-studio-integration>¶</a></h2><p>The pre-built SDK is compiled in release configuration with the <em>Multi-threaded</em> runtime library.<p>As example we compile the following snippet with Visual Studio 2015<div class="highlight-cpp notranslate"><div class=highlight><pre><span></span><span class=cp>#include</span><span class=w> </span><span class=cpf>"stdafx.h"</span>

<span class=cp>#include</span><span class=w> </span><span class=cpf>&LTLIEF/LIEF.hpp></span>

<span class=kt>int</span><span class=w> </span><span class=nf>main</span><span class=p>()</span>
<span class=p>{</span>
<span class=w>  </span><span class=n>std</span><span class=o>::</span><span class=n>unique_ptr</span><span class=o><</span><span class=n>LIEF</span><span class=o>::</span><span class=n>PE</span><span class=o>::</span><span class=n>Binary</span><span class=o>></span><span class=w> </span><span class=n>pe_binary</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>LIEF</span><span class=o>::</span><span class=n>PE</span><span class=o>::</span><span class=n>Parser</span><span class=o>::</span><span class=n>parse</span><span class=p>(</span><span class=s>"C:</span><span class=se>\\</span><span class=s>Windows</span><span class=se>\\</span><span class=s>explorer.exe"</span><span class=p>);</span>
<span class=w>  </span><span class=n>std</span><span class=o>::</span><span class=n>cout</span><span class=w> </span><span class=o><<</span><span class=w> </span><span class=o>*</span><span class=n>pe_binary</span><span class=w> </span><span class=o><<</span><span class=w> </span><span class=n>std</span><span class=o>::</span><span class=n>endl</span><span class=p>;</span>
<span class=w>  </span><span class=k>return</span><span class=w> </span><span class=mi>0</span><span class=p>;</span>
<span class=p>}</span>
</pre></div></div><p>First the build type must be set to <code class="docutils literal notranslate"><span class=pre>Release</span></code>:<figure class=align-center id=id1><img alt=_images/s1.png src=_images/s1.png><figcaption><p><span class=caption-text>Build type set to <code class="docutils literal notranslate"><span class=pre>Release</span></code></span><a title="Link to this image"class=headerlink href=#id1>¶</a></p></figcaption></figure><p>Then we need to specify the location of the LIEF include directory:<figure class=align-center id=id2><img alt=_images/s2.png src=_images/s2.png><figcaption><p><span class=caption-text>LIEF include directory</span><a title="Link to this image"class=headerlink href=#id2>¶</a></p></figcaption></figure><p>and the location of the <code class="docutils literal notranslate"><span class=pre>LIEF.lib</span></code> library:<figure class=align-center id=id3><img alt=_images/s5.png src=_images/s5.png><figcaption><p><span class=caption-text>LIEF library</span><a title="Link to this image"class=headerlink href=#id3>¶</a></p></figcaption></figure><p>As <code class="docutils literal notranslate"><span class=pre>LIEF.lib</span></code> was compiled with the <code class="docutils literal notranslate"><span class=pre>\MT</span></code> flag we have to set it:<figure class=align-center id=id4><img alt=_images/s3.png src=_images/s3.png><figcaption><p><span class=caption-text><em>Multi-threaded</em> as runtime library</span><a title="Link to this image"class=headerlink href=#id4>¶</a></p></figcaption></figure><p>LIEF makes use of <code class="docutils literal notranslate"><span class=pre>and,</span> <span class=pre>or,</span> <span class=pre>not</span></code> C++ keywords. As <strong>MSVC</strong> doesn’t support these keywords by default, we need to add the special file <code class="docutils literal notranslate"><span class=pre>iso646.h</span></code>:<figure class=align-center id=id5><img alt=_images/s4.png src=_images/s4.png><figcaption><p><span class=caption-text>Add <code class="docutils literal notranslate"><span class=pre>iso646.h</span></code> file</span><a title="Link to this image"class=headerlink href=#id5>¶</a></p></figcaption></figure></section><section id=xcode-integration><h2 id=xcode-integration>XCode Integration<a title="Link to this heading"class=headerlink href=#xcode-integration>¶</a></h2><p>To integrate LIEF within a XCode project, one needs to follow these steps:<p>First we create a new project:<figure class=align-center id=id6><img alt=_images/step1.png src=_images/step1.png><figcaption><p><span class=caption-text>New Project</span><a title="Link to this image"class=headerlink href=#id6>¶</a></p></figcaption></figure><p>For this example we select a <em>Command Line Tool</em>:<figure class=align-center id=id7><img alt=_images/step2.png src=_images/step2.png><figcaption><p><span class=caption-text>Command Line Tool</span><a title="Link to this image"class=headerlink href=#id7>¶</a></p></figcaption></figure><figure class=align-center id=id8><img alt=_images/step3.png src=_images/step3.png><figcaption><p><span class=caption-text>Project options</span><a title="Link to this image"class=headerlink href=#id8>¶</a></p></figcaption></figure><p>Then we need to add the static library <code class="docutils literal notranslate"><span class=pre>libLIEF.a</span></code> or the shared one (<code class="docutils literal notranslate"><span class=pre>libLIEF.dylib</span></code>)<figure class=align-center id=id9><img alt=_images/step4.png src=_images/step4.png><figcaption><p><span class=caption-text>Project configuration - Build Phases</span><a title="Link to this image"class=headerlink href=#id9>¶</a></p></figcaption></figure><figure class=align-center id=id10><img alt=_images/step5.png src=_images/step5.png><figcaption><p><span class=caption-text>Project configuration - Build Phases</span><a title="Link to this image"class=headerlink href=#id10>¶</a></p></figcaption></figure><figure class=align-center id=id11><img alt=_images/step6.png src=_images/step6.png><figcaption><p><span class=caption-text>Project configuration - Build Phases</span><a title="Link to this image"class=headerlink href=#id11>¶</a></p></figcaption></figure><p>In the <cite>Build Settings - Search Paths</cite> one needs to specify the paths to the <strong>include directory</strong> and to location of the LIEF libraries (<code class="docutils literal notranslate"><span class=pre>libLIEF.a</span></code> and/or <code class="docutils literal notranslate"><span class=pre>libLIEF.dylib</span></code>)<figure class=align-center id=id12><img alt=_images/step7.png src=_images/step7.png><figcaption><p><span class=caption-text>Libraries and Include search paths</span><a title="Link to this image"class=headerlink href=#id12>¶</a></p></figcaption></figure><p>Once the new project configured we can use LIEF:<figure class=align-center id=id13><img alt=_images/code.png src=_images/code.png><figcaption><p><span class=caption-text>Source code</span><a title="Link to this image"class=headerlink href=#id13>¶</a></p></figcaption></figure><p>and run it:<figure class=align-center id=id14><img alt=_images/result.png src=_images/result.png><figcaption><p><span class=caption-text>Output</span><a title="Link to this image"class=headerlink href=#id14>¶</a></p></figcaption></figure></section><section id=cmake-integration><h2 id=cmake-integration>CMake Integration<a title="Link to this heading"class=headerlink href=#cmake-integration>¶</a></h2><p>There are a few ways to integrate LIEF as a dependency in another project. The different methods are listed in order of preference and CMake best practice. These listings are only to show basic examples. Please refer to the CMake documentation for questions related to more complex project setup.<section id=find-package><h3 id=find-package>find_package()<a title="Link to this heading"class=headerlink href=#find-package>¶</a></h3><p>Using <a class="reference external"href=https://cmake.org/cmake/help/v3.0/command/find_package.html>CMake find_package()</a>:<div class="highlight-cmake notranslate"><div class=highlight><pre><span></span><span class=c># Use LIEF with 'find_package()'</span>
<span class=c># ==============================</span>

<span class=c># Find LIEF. If LIEF was not installed into a default system directory then</span>
<span class=c># specify the following option during CMake configuration:</span>
<span class=c># -DLIEF_DIR=&LTLIEF install prefix>/share/LIEF/cmake</span>
<span class=nb>find_package</span><span class=p>(</span><span class=s>LIEF</span><span class=w> </span><span class=s>REQUIRED</span><span class=w> </span><span class=s>COMPONENTS</span><span class=w> </span><span class=s>STATIC</span><span class=p>)</span><span class=w> </span><span class=c># COMPONENTS: &LTSHARED | STATIC> - Default: STATIC</span>
</pre></div></div><p>And now, to be integrated within a project:<div class="highlight-cmake notranslate"><div class=highlight><pre><span></span><span class=c># Add our executable</span>
<span class=c># ==================</span>
<span class=nb>add_executable</span><span class=p>(</span><span class=s>HelloLIEF</span><span class=w> </span><span class=s>main.cpp</span><span class=p>)</span>

<span class=c># Enable C++11</span>
<span class=nb>set_property</span><span class=p>(</span><span class=s>TARGET</span><span class=w> </span><span class=s>HelloLIEF</span>
<span class=w>             </span><span class=s>PROPERTY</span><span class=w> </span><span class=s>CXX_STANDARD</span><span class=w>           </span><span class=s>11</span>
<span class=w>             </span><span class=s>PROPERTY</span><span class=w> </span><span class=s>CXX_STANDARD_REQUIRED</span><span class=w>  </span><span class=s>ON</span><span class=p>)</span>

<span class=c># Link the executable with LIEF</span>
<span class=nb>target_link_libraries</span><span class=p>(</span><span class=s>HelloLIEF</span><span class=w> </span><span class=s>PRIVATE</span><span class=w> </span><span class=s>LIEF::LIEF</span><span class=p>)</span>
</pre></div></div><p>For the compilation:<div class="highlight-console notranslate"><div class=highlight><pre><span></span><span class=gp>$ </span>mkdir<span class=w> </span>build
<span class=gp>$ </span><span class=nb>cd</span><span class=w> </span>build
<span class=gp>$ </span>cmake<span class=w> </span>-DLIEF_DIR<span class=o>=</span>&LTPATH_TO_LIEF_INSTALL_DIR>/share/LIEF/cmake<span class=w> </span>..
<span class=gp>$ </span>make
<span class=gp>$ </span>HelloLIEF<span class=w> </span>/bin/ls<span class=w> </span><span class=c1># or explorer.exe or whatever</span>
</pre></div></div><p>A <em>full</em> example is available in the <code class="docutils literal notranslate"><span class=pre>examples/cmake/find_package</span></code> directory.</section><section id=add-subdirectory-or-fetchcontent><h3 id=add-subdirectory-or-fetchcontent>add_subdirectory() or FetchContent<a title="Link to this heading"class=headerlink href=#add-subdirectory-or-fetchcontent>¶</a></h3><p>First, set up the options you want to set as default for the LIEF project:<div class="highlight-cmake notranslate"><div class=highlight><pre><span></span><span class=c># Use LIEF as an embedded/vendored project</span>
<span class=c># ========================================</span>

<span class=c># LIEF build config. Set the default options for LIEF's project setup</span>
<span class=nb>option</span><span class=p>(</span><span class=s>LIEF_DOC</span><span class=w> </span><span class=s2>"Build LIEF docs"</span><span class=w> </span><span class=s>OFF</span><span class=p>)</span>
<span class=nb>option</span><span class=p>(</span><span class=s>LIEF_PYTHON_API</span><span class=w> </span><span class=s2>"Build LIEF Python API"</span><span class=w> </span><span class=s>OFF</span><span class=p>)</span>
<span class=nb>option</span><span class=p>(</span><span class=s>LIEF_EXAMPLES</span><span class=w> </span><span class=s2>"Build LIEF examples"</span><span class=w> </span><span class=s>OFF</span><span class=p>)</span>
<span class=nb>option</span><span class=p>(</span><span class=s>LIEF_TESTS</span><span class=w> </span><span class=s2>"Build LIEF tests"</span><span class=w> </span><span class=s>OFF</span><span class=p>)</span>

<span class=nb>if</span><span class=p>(</span><span class=s>MSVC</span><span class=p>)</span>
<span class=w>  </span><span class=nb>set</span><span class=p>(</span><span class=s>CMAKE_MSVC_RUNTIME_LIBRARY</span><span class=w> </span><span class=s2>"MultiThreaded"</span><span class=w> </span><span class=s>CACHE</span><span class=w> </span><span class=s>STRING</span><span class=w> </span><span class=s2>"CRT option"</span><span class=p>)</span>
<span class=nb>endif</span><span class=p>()</span>
</pre></div></div><p>Using <a class="reference external"href=https://cmake.org/cmake/help/v3.0/command/add_subdirectory.html>CMake add_subdirectory()</a> to add a submodule LIEF source directory:<div class="highlight-cmake notranslate"><div class=highlight><pre><span></span><span class=c># If you have LIEF as a submodule in a directory, then you can add it to this</span>
<span class=c># project with ``add_subdirectory``</span>
<span class=c># NOTE: This submodule does not exist for this example, but it does the same</span>
<span class=c># thing as FetchContent without the download part</span>
<span class=nb>set</span><span class=p>(</span><span class=s>vendorLIEF_submodule_dir</span><span class=w> </span><span class=s2>"${CMAKE_CURRENT_LIST_DIR}/LIEF"</span><span class=p>)</span>
<span class=nb>if</span><span class=p>(</span><span class=s>EXISTS</span><span class=w> </span><span class=s2>"${vendorLIEF_submodule_dir}"</span><span class=p>)</span>
<span class=w>  </span><span class=nb>add_subdirectory</span><span class=p>(</span><span class=s2>"${vendorLIEF_submodule_dir}"</span><span class=p>)</span>
</pre></div></div><p>If we are using a CMake version greater than or equal to 3.11, we can use <a class="reference external"href=https://cmake.org/cmake/help/v3.11/module/FetchContent.html>CMake FetchContent module</a> to download or specify a LIEF source directory outside of the current directory:<div class="highlight-cmake notranslate"><div class=highlight><pre><span></span><span class=w>  </span><span class=nb>cmake_minimum_required</span><span class=p>(</span><span class=s>VERSION</span><span class=w> </span><span class=s>3.11</span><span class=p>)</span>

<span class=w>  </span><span class=c># URL of the LIEF repo (Can be your fork)</span>
<span class=w>  </span><span class=nb>set</span><span class=p>(</span><span class=s>LIEF_GIT_URL</span><span class=w> </span><span class=s2>"https://github.com/lief-project/LIEF.git"</span><span class=p>)</span>

<span class=w>  </span><span class=c># LIEF's version to be used (can be 'master')</span>
<span class=w>  </span><span class=nb>set</span><span class=p>(</span><span class=s>LIEF_VERSION</span><span class=w> </span><span class=s>0.13.0</span><span class=p>)</span>

<span class=w>  </span><span class=nb>include</span><span class=p>(</span><span class=s>FetchContent</span><span class=p>)</span>
<span class=w>  </span><span class=nb>FetchContent_Declare</span><span class=p>(</span><span class=s>LIEF</span>
<span class=w>    </span><span class=s>GIT_REPOSITORY</span><span class=w>  </span><span class=s2>"${LIEF_GIT_URL}"</span>
<span class=w>    </span><span class=s>GIT_TAG</span><span class=w>         </span><span class=o>${</span><span class=nv>LIEF_VERSION</span><span class=o>}</span>
<span class=w>    </span><span class=c># You may specify an existing LIEF source directory if you don't want to</span>
<span class=w>    </span><span class=c># download. Just comment out the above ``GIT_*`` commands and uncoment the</span>
<span class=w>    </span><span class=c># following ``SOURCE_DIR`` line</span>
<span class=w>    </span><span class=c>#SOURCE_DIR      "${CMAKE_CURRENT_LIST_DIR}/../../.."</span>
<span class=w>    </span><span class=p>)</span>

<span class=w>  </span><span class=nb>if</span><span class=p>(</span><span class=o>${</span><span class=nv>CMAKE_VERSION</span><span class=o>}</span><span class=w> </span><span class=s>VERSION_LESS</span><span class=w> </span><span class=s2>"3.14.0"</span><span class=p>)</span>
<span class=w>    </span><span class=c># CMake 3.11 to 3.13 needs more verbose method to make LIEF available</span>
<span class=w>    </span><span class=nb>FetchContent_GetProperties</span><span class=p>(</span><span class=s>LIEF</span><span class=p>)</span>
<span class=w>    </span><span class=nb>if</span><span class=p>(</span><span class=s>NOT</span><span class=w> </span><span class=s>LIEF_POPULATED</span><span class=p>)</span>
<span class=w>      </span><span class=nb>FetchContent_Populate</span><span class=p>(</span><span class=s>LIEF</span><span class=p>)</span>
<span class=w>      </span><span class=nb>add_subdirectory</span><span class=p>(</span><span class=o>${</span><span class=nv>LIEF_SOURCE_DIR</span><span class=o>}</span><span class=w> </span><span class=o>${</span><span class=nv>LIEF_BINARY_DIR</span><span class=o>}</span><span class=p>)</span>
<span class=w>    </span><span class=nb>endif</span><span class=p>()</span>
<span class=w>  </span><span class=nb>else</span><span class=p>()</span>
<span class=w>    </span><span class=c># CMake 3.14+ has single function to make LIEF available (recommended)</span>
<span class=w>    </span><span class=nb>FetchContent_MakeAvailable</span><span class=p>(</span><span class=s>LIEF</span><span class=p>)</span>
<span class=w>  </span><span class=nb>endif</span><span class=p>()</span>
</pre></div></div><p>And now, to be integrated within a project:<div class="highlight-cmake notranslate"><div class=highlight><pre><span></span><span class=c># Add our executable</span>
<span class=c># ==================</span>
<span class=nb>add_executable</span><span class=p>(</span><span class=s>HelloLIEF</span><span class=w> </span><span class=s>main.cpp</span><span class=p>)</span>

<span class=c># Enable C++11</span>
<span class=nb>set_property</span><span class=p>(</span><span class=s>TARGET</span><span class=w> </span><span class=s>HelloLIEF</span>
<span class=w>             </span><span class=s>PROPERTY</span><span class=w> </span><span class=s>CXX_STANDARD</span><span class=w>           </span><span class=s>11</span>
<span class=w>             </span><span class=s>PROPERTY</span><span class=w> </span><span class=s>CXX_STANDARD_REQUIRED</span><span class=w>  </span><span class=s>ON</span><span class=p>)</span>

<span class=c># Link the executable with LIEF</span>
<span class=nb>target_link_libraries</span><span class=p>(</span><span class=s>HelloLIEF</span><span class=w> </span><span class=s>PUBLIC</span><span class=w> </span><span class=s>LIEF::LIEF</span><span class=p>)</span>
</pre></div></div><p>For the compilation:<div class="highlight-console notranslate"><div class=highlight><pre><span></span><span class=gp>$ </span>mkdir<span class=w> </span>build
<span class=gp>$ </span><span class=nb>cd</span><span class=w> </span>build
<span class=gp>$ </span>cmake<span class=w> </span>..
<span class=gp>$ </span>make
<span class=gp>$ </span>HelloLIEF<span class=w> </span>/bin/ls<span class=w> </span><span class=c1># or explorer.exe or whatever</span>
</pre></div></div><p>A <em>full</em> example is available in the <code class="docutils literal notranslate"><span class=pre>examples/cmake/add_subdirectory</span></code> directory.</section><section id=external-project><h3 id=external-project>External Project<a title="Link to this heading"class=headerlink href=#external-project>¶</a></h3><p>If you don’t want to use LIEF as a submodule or upgrade to CMake 3.11, we can use <a class="reference external"href=https://cmake.org/cmake/help/v3.0/module/ExternalProject.html>CMake External Project</a> to set up a project as a <a class="reference external"href=https://www.kitware.com/cmake-superbuilds-git-submodules>*superbuild*</a>:<div class="highlight-cmake notranslate"><div class=highlight><pre><span></span><span class=nb>cmake_minimum_required</span><span class=p>(</span><span class=s>VERSION</span><span class=w> </span><span class=s>3.0</span><span class=p>)</span>

<span class=nb>project</span><span class=p>(</span><span class=s>CMakeLIEF</span><span class=w> </span><span class=s>LANGUAGES</span><span class=w> </span><span class=s>NONE</span><span class=p>)</span>

<span class=nb>include</span><span class=p>(</span><span class=s>ExternalProject</span><span class=p>)</span>

<span class=c># LIEF integration as an External Project</span>
<span class=c># ===========================</span>
<span class=nb>set</span><span class=p>(</span><span class=s>LIEF_PREFIX</span><span class=w>       </span><span class=s2>"${CMAKE_CURRENT_BINARY_DIR}/LIEF"</span><span class=p>)</span>
<span class=nb>set</span><span class=p>(</span><span class=s>LIEF_INSTALL_DIR</span><span class=w>  </span><span class=s2>"${LIEF_PREFIX}/install"</span><span class=p>)</span>

<span class=c># URL of the LIEF repo (Can be your fork)</span>
<span class=nb>set</span><span class=p>(</span><span class=s>LIEF_GIT_URL</span><span class=w> </span><span class=s2>"https://github.com/lief-project/LIEF.git"</span><span class=p>)</span>

<span class=c># LIEF's version to be used (can be 'master')</span>
<span class=nb>set</span><span class=p>(</span><span class=s>LIEF_VERSION</span><span class=w> </span><span class=s>0.13.0</span><span class=p>)</span>

<span class=c># LIEF compilation config</span>
<span class=nb>set</span><span class=p>(</span><span class=s>LIEF_CMAKE_ARGS</span>
<span class=w>  </span><span class=s>-DCMAKE_INSTALL_PREFIX=&LTINSTALL_DIR></span>
<span class=w>  </span><span class=s>-DCMAKE_BUILD_TYPE=RelWithDebInfo</span>
<span class=w>  </span><span class=s>-DLIEF_DOC=OFF</span>
<span class=w>  </span><span class=s>-DLIEF_PYTHON_API=OFF</span>
<span class=w>  </span><span class=s>-DLIEF_EXAMPLES=OFF</span>
<span class=w>  </span><span class=s>-DLIEF_TESTS=OFF</span>
<span class=p>)</span>

<span class=nb>if</span><span class=p>(</span><span class=s>MSVC</span><span class=p>)</span>
<span class=w>  </span><span class=nb>list</span><span class=p>(</span><span class=s>APPEND</span><span class=w> </span><span class=o>${</span><span class=nv>LIEF_CMAKE_ARGS</span><span class=o>}</span><span class=w> </span><span class=s>-DCMAKE_MSVC_RUNTIME_LIBRARY=MT</span><span class=p>)</span>
<span class=nb>endif</span><span class=p>()</span>

<span class=nb>ExternalProject_Add</span><span class=p>(</span><span class=s>LIEF</span>
<span class=w>  </span><span class=s>PREFIX</span><span class=w>           </span><span class=s2>"${LIEF_PREFIX}"</span>
<span class=w>  </span><span class=s>GIT_REPOSITORY</span><span class=w>   </span><span class=s2>"${LIEF_GIT_URL}"</span>
<span class=w>  </span><span class=s>GIT_TAG</span><span class=w>          </span><span class=o>${</span><span class=nv>LIEF_VERSION</span><span class=o>}</span>
<span class=w>  </span><span class=c># You may specify an existing LIEF source directory if you don't want to</span>
<span class=w>  </span><span class=c># download. Just comment out the above ``GIT_*`` commands and uncoment the</span>
<span class=w>  </span><span class=c># following ``SOURCE_DIR`` line</span>
<span class=w>  </span><span class=c>#SOURCE_DIR       "${CMAKE_CURRENT_LIST_DIR}/../../.."</span>
<span class=w>  </span><span class=s>INSTALL_DIR</span><span class=w>      </span><span class=s2>"${LIEF_INSTALL_DIR}"</span>
<span class=w>  </span><span class=s>CMAKE_ARGS</span><span class=w>       </span><span class=o>${</span><span class=nv>LIEF_CMAKE_ARGS</span><span class=o>}</span>
</pre></div></div><p>And now, to be integrated with our main <code class="docutils literal notranslate"><span class=pre>HelloLIEF</span></code> project that is located in a subdirectory and looks exactly like the <code class="docutils literal notranslate"><span class=pre>find_package()</span></code> example shown earlier:<div class="highlight-cmake notranslate"><div class=highlight><pre><span></span><span class=c># User project</span>
<span class=c># ============</span>
<span class=nb>ExternalProject_Add</span><span class=p>(</span><span class=s>HelloLIEF</span>
<span class=w>  </span><span class=s>DEPENDS</span><span class=w>         </span><span class=s>LIEF</span>
<span class=w>  </span><span class=s>SOURCE_DIR</span><span class=w>      </span><span class=s2>"${CMAKE_CURRENT_LIST_DIR}/HelloLIEF"</span>
<span class=w>  </span><span class=s>BINARY_DIR</span><span class=w>      </span><span class=s2>"${CMAKE_CURRENT_BUILD_DIR}"</span>
<span class=w>  </span><span class=s>INSTALL_COMMAND</span><span class=w> </span><span class=s2>""</span>
<span class=w>  </span><span class=s>CMAKE_ARGS</span>
<span class=w>    </span><span class=s2>"-DLIEF_DIR=${LIEF_INSTALL_DIR}/share/LIEF/cmake"</span>
<span class=w>    </span><span class=s>-DCMAKE_BUILD_TYPE=RelWithDebInfo</span>
<span class=p>)</span>
</pre></div></div><p>For the compilation:<div class="highlight-console notranslate"><div class=highlight><pre><span></span><span class=gp>$ </span>mkdir<span class=w> </span>build
<span class=gp>$ </span><span class=nb>cd</span><span class=w> </span>build
<span class=gp>$ </span>cmake<span class=w> </span>..
<span class=gp>$ </span>make
<span class=gp>$ </span>HelloLIEF<span class=w> </span>/bin/ls<span class=w> </span><span class=c1># or explorer.exe or what ever</span>
</pre></div></div><p>A <em>full</em> example is available in the <code class="docutils literal notranslate"><span class=pre>examples/cmake/external_project</span></code> directory.</section></section></section></div><div class="col-xl-2 d-none d-xl-block px-0 py-5 docs-sidebar docs-sidebar-right"><aside class="border-left pl-5 py-3"><span class="text-uppercase text-muted font-size-sm d-block mb-3"> On this page: </span><a class="d-block my-2"data-toggle=scroll href=#sdk>SDK</a><a class="d-block my-2"data-toggle=scroll href=#python>Python</a><a class="d-block my-2"data-toggle=scroll href=#visual-studio-integration>Visual Studio Integration</a><a class="d-block my-2"data-toggle=scroll href=#xcode-integration>XCode Integration</a><a class="d-block my-2"data-toggle=scroll href=#cmake-integration>CMake Integration</a></aside></div></div></div>